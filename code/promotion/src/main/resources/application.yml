avro:
  codegen:
    enableDecimalLogicalType: true
    optionalGettersForNullableFieldsOnly: true
quarkus:
  datasource:
    reactive:
      url: 'vertx-reactive:postgresql://localhost:5432/promotion_service'
    db-kind: postgresql
    metrics:
      enabled: true
    password: postgres
    username: postgres
  hibernate-orm:
    query:
      fail-on-pagination-over-collection-fetch: true
    schema-management:
      strategy: drop-and-create
    second-level-caching-enabled: false
    log:
      sql: false
      format-sql: false
    physical-naming-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
  http:
    port: 8080
    auth:
      permission:
        authenticated:
          paths: /*
          policy: authenticated
        permit:
          paths: /q/*
          policy: permit
  oidc:
    enabled: true
    auth-server-url: http://localhost:8180
    client-id: postman
    application-type: SERVICE
    authentication:
      user-info-required: true
  log:
    handler:
      console:
        console:
          format: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] %X (%t) %s%e%n"
kafka:
  bootstrap:
    servers: localhost:9092

mp:
  messaging:
    connector:
      smallrye-kafka:
        apicurio:
          registry:
            url: http://localhost:8081/apis/registry/v2
    incoming:
      payment-in:
        topic: "payment.initiated"
        connector: smallrye-kafka
        value:
          deserializer: io.apicurio.registry.serde.avro.AvroKafkaDeserializer
        apicurio:
          registry:
            url: http://localhost:8081/apis/registry/v2
        enable:
          auto:
            commit: false
        auto:
          offset:
            reset: "earliest"
      payment-failed-in:
        topic: "payment.failed"
        connector: smallrye-kafka
        group:
          id: "promotion-saga-group"
        value:
          deserializer: io.apicurio.registry.serde.avro.AvroKafkaDeserializer
        apicurio:
          registry:
            url: http://localhost:8081/apis/registry/v2
        enable:
          auto:
            commit: false
        auto:
          offset:
            reset: "latest"
      payment-success-in:
        topic: "payment.success"
        connector: smallrye-kafka
        group:
          id: "promotion-confirmation-group"
        value:
          deserializer: io.apicurio.registry.serde.avro.AvroKafkaDeserializer
        apicurio:
          registry:
            url: http://localhost:8081/apis/registry/v2
        enable:
          auto:
            commit: false
        auto:
          offset:
            reset: "latest"
    outgoing:
      promotion-out:
        topic: "promotion.applied"
        connector: smallrye-kafka
        value:
          serializer: io.apicurio.registry.serde.avro.AvroKafkaSerializer
        apicurio:
          registry:
            url: http://localhost:8081/apis/registry/v2
            auto-register: true